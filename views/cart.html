<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ - BLACK DIAMOND</title>
    <link rel="stylesheet" type="text/css" href="/static/css/cart.css">
</head>
<body>
    <header>
        <div class="header-container">
            <a class="logo">BLACK<span>DIAMOND</span></a>
            <nav>
                <ul>
                    <li><a href="/?username={{.Username}}">‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</a></li>
                    <li><a href="/cart?username={{.Username}}">‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</a></li>
                    <li><a href="/orders?username={{.Username}}">‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</a></li>
                </ul>
            </nav>
            <div class="auth-buttons">
                {{if .Username}}
                    <a href="/logout" class="btn btn-login">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</a>
                {{else}}
                    <a href="/Login" class="btn btn-login">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</a>
                    <a href="/register" class="btn btn-register">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</a>
                {{end}}
            </div>
        </div>
    </header>

    <div class="cart-container">
        <div class="cart-header">
            <h1>‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h1>
            <p>‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</p>
        </div>

        {{if .Message}}
        <div class="message {{.MessageType}}">
            {{.Message}}
        </div>
        {{end}}

        {{if .CartItems}}
        <div class="cart-items">
            {{range .CartItems}}
            <div class="cart-item">
                <img src="/static/images/{{.Name}}.jpg" alt="{{.Name}}" class="item-image">
                <div class="item-details">
                    <div class="item-name">{{.Name}}</div>
                    <div class="item-material">{{.Material}}</div>
                    <div class="item-price">{{.Price}} ‡∏ø</div>
                    <form method="POST" action="/updateCartItem" class="quantity-form">
                        <input type="hidden" name="jewelry_id" value="{{.JewelryID}}">
                        <input type="hidden" name="username" value="{{$.Username}}">
                        <label>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:</label>
                        <input type="number" name="quantity" class="quantity-input" value="{{.Quantity}}" min="1" max="{{.Stock}}">
                        <button type="submit" class="update-btn">‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó</button>
                        <span class="stock-info">‡∏°‡∏µ‡πÉ‡∏ô‡∏™‡∏ï‡πá‡∏≠‡∏Å: {{.Stock}} ‡∏ä‡∏¥‡πâ‡∏ô</span>
                    </form>
                </div>
                <form method="POST" action="/removeFromCart" class="remove-form">
                    <input type="hidden" name="jewelry_id" value="{{.JewelryID}}">
                    <input type="hidden" name="username" value="{{$.Username}}">
                    <button type="submit" class="remove-btn" onclick="return confirm('‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ô‡∏µ‡πâ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')">‡∏•‡∏ö‡∏≠‡∏≠‡∏Å</button>
                </form>
            </div>
            {{end}}
        </div>

        <div class="cart-summary">
            <div class="summary-title">‡∏™‡∏£‡∏∏‡∏õ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</div>
            <div class="summary-row">
                <span>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤:</span>
                <span>{{.TotalItems}} ‡∏ä‡∏¥‡πâ‡∏ô</span>
            </div>
            <div class="summary-row">
                <span>‡∏Ñ‡πà‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤:</span>
                <span>{{.Subtotal}} ‡∏ø</span>
            </div>
            <div class="summary-row">
                <span>‡∏Ñ‡πà‡∏≤‡∏à‡∏±‡∏î‡∏™‡πà‡∏á:</span>
                <span>‡∏ü‡∏£‡∏µ</span>
            </div>
            <div class="summary-row summary-total">
                <span>‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏¥‡πâ‡∏ô:</span>
                <span>{{.Total}} ‡∏ø</span>
            </div>
            <form method="POST" action="/checkout">
                <input type="hidden" name="username" value="{{.Username}}">
                <button type="submit" class="checkout-btn" onclick="return confirm('‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠?')">‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</button>
            </form>
            <a href="/?username={{.Username}}" class="continue-shopping">‚Üê ‡∏ä‡πá‡∏≠‡∏õ‡∏õ‡∏¥‡πâ‡∏á‡∏ï‡πà‡∏≠</a>
        </div>
        {{else}}
        <div class="cart-items">
            <div class="empty-cart">
                <div class="empty-cart-icon">üõí</div>
                <h3>‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏õ‡∏•‡πà‡∏≤</h3>
                <p>‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏•‡∏á‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ä‡πá‡∏≠‡∏õ‡∏õ‡∏¥‡πâ‡∏á</p>
                <a href="/?username={{.Username}}" class="checkout-btn">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ä‡πá‡∏≠‡∏õ‡∏õ‡∏¥‡πâ‡∏á</a>
            </div>
        </div>
        {{end}}
    </div>
</body>
</html>